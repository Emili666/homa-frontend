<!-- Trigger Button -->
<button (click)="togglePanel()" 
        class="fixed right-0 top-1/2 -translate-y-1/2 bg-primary-600 text-white p-3 rounded-l-xl shadow-2xl hover:bg-primary-700 transition-all z-50 flex flex-col items-center"
        aria-label="Abrir panel de accesibilidad">
  <span class="material-icons mb-1">accessibility</span>
  <span class="text-[10px] font-bold uppercase tracking-wider">Acceso</span>
</button>

<!-- Overlay -->
<div *ngIf="isOpen" (click)="togglePanel()" class="fixed inset-0 bg-black/20 backdrop-blur-sm z-50 transition-all"></div>

<!-- Panel -->
<div [class.translate-x-0]="isOpen" [class.translate-x-full]="!isOpen"
     class="fixed right-0 top-0 h-full w-80 bg-white dark:bg-gray-800 shadow-2xl z-[60] transition-transform duration-300 ease-in-out border-l border-gray-100 dark:border-gray-700">
  
  <div class="h-full flex flex-col">
    <div class="p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-gray-900/50">
      <h3 class="text-xl font-bold text-gray-800 dark:text-white flex items-center">
        <span class="material-icons mr-2 text-primary-600">accessibility_new</span>
        Accesibilidad
      </h3>
      <button (click)="togglePanel()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
        <span class="material-icons">close</span>
      </button>
    </div>

    <div class="flex-1 overflow-y-auto p-6 space-y-8">
      <!-- Text Size -->
      <section>
        <h4 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4">Tama√±o de Fuente</h4>
        <div class="grid grid-cols-3 gap-3">
          <button (click)="setTextSize('small')" [class.ring-2]="textSize === 'small'" 
                  class="p-3 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-all ring-primary-500">
            <span class="text-xs font-bold">A</span>
          </button>
          <button (click)="setTextSize('medium')" [class.ring-2]="textSize === 'medium'" 
                  class="p-3 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-all ring-primary-500">
            <span class="text-sm font-bold">A</span>
          </button>
          <button (click)="setTextSize('large')" [class.ring-2]="textSize === 'large'" 
                  class="p-3 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-all ring-primary-500">
            <span class="text-lg font-bold">A</span>
          </button>
        </div>
      </section>

      <!-- Contrast -->
      <section>
        <h4 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4">Modo Visual</h4>
        <div class="space-y-3">
          <button (click)="toggleContrast()" 
                  class="w-full flex justify-between items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-all group">
            <span class="font-medium text-gray-700 dark:text-gray-200">Alto Contraste</span>
            <div [class.bg-primary-600]="highContrast" 
                 class="w-12 h-6 bg-gray-300 dark:bg-gray-600 rounded-full relative transition-colors">
              <div [class.translate-x-6]="highContrast"
                   class="absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform"></div>
            </div>
          </button>

          <button (click)="toggleGrayScale()" 
                  class="w-full flex justify-between items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-all group">
            <span class="font-medium text-gray-700 dark:text-gray-200">Escala de Grises</span>
            <div [class.bg-primary-600]="grayScale" 
                 class="w-12 h-6 bg-gray-300 dark:bg-gray-600 rounded-full relative transition-colors">
              <div [class.translate-x-6]="grayScale"
                   class="absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform"></div>
            </div>
          </button>
        </div>
      </section>

      <!-- Fonts -->
      <section>
        <h4 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4">Ayuda de Lectura</h4>
        <button (click)="toggleDyslexicFont()" 
                class="w-full flex justify-between items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-all group">
          <span class="font-medium text-gray-700 dark:text-gray-200">Fuente para Dislexia</span>
          <div [class.bg-primary-600]="dyslexicFont" 
               class="w-12 h-6 bg-gray-300 dark:bg-gray-600 rounded-full relative transition-colors">
            <div [class.translate-x-6]="dyslexicFont"
                 class="absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform"></div>
          </div>
        </button>
      </section>
    </div>

    <div class="p-6 border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50">
      <button (click)="resetSettings()" 
              class="w-full py-3 border border-red-200 text-red-600 font-bold rounded-xl hover:bg-red-50 transition-colors flex items-center justify-center">
        <span class="material-icons text-sm mr-2">refresh</span>
        Restablecer Todo
      </button>
    </div>
  </div>
</div>
